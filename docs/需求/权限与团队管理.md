è¯·å¸®æˆ‘å®ç°ä»¥ä¸‹ Laravel åç«¯é€»è¾‘ï¼ˆé€‚ç”¨äº Jetstream çš„ Team æ¨¡å‹ï¼‰ï¼š

### ğŸ” åˆ é™¤å›¢é˜Ÿæ—¶çš„ä¸šåŠ¡é€»è¾‘è¦æ±‚ï¼š

1. å½“æŸä¸ªå›¢é˜Ÿè¢«åˆ é™¤æ—¶ï¼ˆTeam::deleting / deletedï¼‰ï¼š
   - æ‰€æœ‰â€œå½“å‰ä»…å±äºè¿™ä¸ªå›¢é˜Ÿâ€çš„ç”¨æˆ·ï¼Œå…¶ current_team_id è‡ªåŠ¨åˆ‡æ¢åˆ°ç³»ç»Ÿ default teamï¼›
   - å…¶ä»–ç”¨æˆ·ä¿ç•™åŸ current_team_idï¼›

2. åˆ é™¤è¯¥å›¢é˜Ÿç»‘å®šçš„æ‰€æœ‰æƒé™ä¸è§’è‰²å…³ç³»ï¼ˆSpatieï¼‰ï¼š
   - åˆ é™¤ model_has_roles å’Œ model_has_permissions ä¸­çš„è¯¥ team_id è®°å½•ï¼›

3. åŒºåˆ† softDelete ä¸ forceDeleteï¼š
   - å¦‚æœæ˜¯è½¯åˆ é™¤ï¼Œä»…æ‰§è¡Œä¸Šé¢é€»è¾‘ï¼›
   - å¦‚æœæ˜¯ forceDeleteï¼Œè¿˜è¦åˆ é™¤è¯¥å›¢é˜Ÿä¸‹çš„ team_userã€é‚€è¯·è®°å½•ã€æ—¥å¿—ç­‰æ‰€æœ‰å…³è”æ•°æ®ã€‚

4. åˆ›å»º TeamPolicy ä¸­çš„ delete æ–¹æ³•ï¼š
   - åªæœ‰è¶…çº§ç®¡ç†å‘˜ï¼ˆis_super_adminï¼‰æˆ–æ‹¥æœ‰ 'teams.delete' æƒé™çš„ç”¨æˆ·æ‰èƒ½æ‰§è¡Œåˆ é™¤ï¼›
   - æ³¨å†Œ TeamPolicy åˆ° AuthServiceProviderï¼›

### âœ³ï¸ æŠ€æœ¯è¦æ±‚ï¼š

- æ¨èä½¿ç”¨ Eloquent æ¨¡å‹äº‹ä»¶ booted() æˆ– observer å®ç°ï¼›
- å¦‚æœå¯èƒ½ï¼Œå°† default team ID ç¼“å­˜èµ·æ¥ï¼Œé¿å…é‡å¤æŸ¥è¯¢ï¼›
- æœ€ç»ˆå¯ä»¥å†™å…¥ App\Actions\Teams\DeleteTeam çš„é€»è¾‘ä¸­ã€‚

è¯·æŒ‰ Laravel 12 + Jetstream + Spatie æ¶æ„è§„èŒƒå®Œæˆä»£ç ã€‚



